(function(a){a.fn.autotabs=function(b){var c,d,e=false;var f={init:function(b){c=a.extend({},this.autotabs.defaults,b);var f='<ul class="'+c.tabs_class+'">';d=(c.active_tab==null?a.cookie?a.cookie(c.cookie_name):0:c.active_tab)||0;return this.each(function(){var b=a(this);var h=b.children(c.tab_pane_selector);switch(h.length){case 0:return;case 1:if(!c.tab_orphans){h.show();return};default:h.each(function(a,b){f+=g.generate_tab(a,b)})}f+="</ul>";var i=c.tabs_selector!=""?a(c.tabs_selector):b;if(!i){i=b}i.prepend(f);a("ul."+c.tabs_class+" li > a",i).click(function(){if(e){return false}e=true;g.showLoadingIcon(c);var d=a(this);d.parent().addClass(c.active_class).siblings("li").removeClass(c.active_class);b.children(c.tab_pane_selector).each(function(){a(this).slideUp("fast").removeClass(c.active_class)});b.children(c.tab_pane_selector).each(function(b){if(d.attr("rel")==this.id){try{g.load(this);if(a.cookie){a.cookie(c.cookie_name,b,{path:c.cookie_path})}}catch(e){console.log(e)}}});return false});b.children(c.tab_pane_selector).each(function(b,e){if(b==d){g.load(e)}else{a(e).slideUp("fast").removeClass(c.active_class)}})})}};var g={generate_tab:function(b,e){var f="<li"+(b==d?' class="'+c.active_class+'"':"")+(c.tab_id&&a.isFunction(c.tab_id)?' id="'+c.tab_id(e.id)+'">':">")+'<a href="'+(a(e).attr("rel")||"#"+e.id)+'" rel="'+a(e).attr("id")+'">'+(a(e).attr("title")||a(c.tab_label_selector,a(e)).get(0).innerHTML)+"</a></li>";return f},load:function(b){var d=g.getSuccess(b.id);if((url=a(b).attr("rel"))&&(a.trim(a(b).html())==""||c.force_refresh)){a(b).empty();a(b).load(url,function(){a(b).slideDown("fast").addClass(c.active_class);if(d&&a.isFunction(d)){d.call(b)}e=false;g.hideLoadingIcon(c)})}else{a(b).slideDown("fast").addClass(c.active_class);if(d&&a.isFunction(d)){d.call(b)}e=false;g.hideLoadingIcon(c)}},getSuccess:function(b){if(!c.success){return null}if(a.isFunction(c.success)){return c.success}return c.success[b]},showLoadingIcon:function(b){if(!b.loading_icon){return}a(b.loading_icon).show()},hideLoadingIcon:function(b){if(!b.loading_icon){return}a(b.loading_icon).hide()}};if(f[b]){return f[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return f.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist in jQuery.autotabs")}};a.fn.autotabs.defaults={tab_pane_selector:"div",tab_label_selector:"h3",tabs_class:"autotabs",tabs_selector:"",active_class:"current",active_tab:null,cookie_name:"active_tab",cookie_path:"/",force_refresh:false,tab_orphans:false,loading_icon:"#loading",tab_id:function(a){return"__"+a}}})(jQuery)
