/*! jquery.autotabs 20-05-2013 */
(function(a){a.fn.autotabs=function(t){var e,i,s=!1,n={init:function(t){return e=a.extend(!0,{},this.autotabs.defaults,t),this.each(function(){var t=a(this),n=t.children(e.tab_pane_selector);if(0!==n.length){if(1==n.length&&!e.tab_orphans)return n.show(),void 0;var o='<ul class="'+e.tabs_class+(e.vertical?" vertical":"")+'">';i=(null===e.active_tab?a.cookie?a.cookie(e.cookie_name):0:e.active_tab)||0,i=Math.min(n.length-1,i),n.each(function(t,i){if(""===i.id){var s=e.tab_pane_id&&a.isFunction(e.tab_pane_id)?e.tab_pane_id(t,i):"___"+(t+1);a(i).attr("id",s)}o+=c.generate_tab(t,i)}),o+="</ul>";var l=""!==e.tabs_selector?a(e.tabs_selector):t;l||(l=t),a("."+e.tabs_class,l).remove(),l.prepend(o),a("li > a",l.children().first()).click(function(){if(s)return!1;var i=a(this);return a(this).parent().hasClass(e.active_class)&&!e.force_refresh?!1:(s=!0,c.showLoadingIcon(e),i.parent().addClass(e.active_class).siblings("li").removeClass(e.active_class),t.children(e.tab_pane_selector).each(function(){a(this).slideUp("fast").removeClass(e.active_class)}),t.children(e.tab_pane_selector).each(function(t){if(i.attr("rel")==a(this).attr("id"))try{c.load(this),a.cookie&&a.cookie(e.cookie_name,t,{path:e.cookie_path})}catch(s){}}),!1)}),c.showLoadingIcon(e),t.children(e.tab_pane_selector).each(function(t,s){t==i?c.load(s):a(s).slideUp("fast").removeClass(e.active_class)})}})}},c={generate_tab:function(t,s){var n=e.tab_id&&a.isFunction(e.tab_id)?e.tab_id(s.id):s.id,c=e.tab_class;a(s).data("tab-class")&&(c+=" "+a(s).data("tab-class")),c+=t==i?" "+e.active_class:"";var o=a(s).attr("title")||(a(e.tab_label_selector,a(s)).length?a(e.tab_label_selector,a(s)).get(0).innerHTML:e.tab_label&&a.isFunction(e.tab_label)?e.tab_label(t,s):"Tab "+(t+1)),l='<a href="'+(a(s).attr("rel")||"#"+s.id)+'" rel="'+s.id+'"><span>'+o+"</span></a>";return'<li class="'+c+'" id="'+n+'">'+l+"</li>"},load:function(t){var i=c.getSuccess(t.id);(url=a(t).attr("rel"))&&(""===a.trim(a(t).html())||e.force_refresh)?(a(t).empty(),a.ajax({url:url,error:function(){location.reload(!0)},success:function(n){a(t).html(n),a(t).slideDown("fast").addClass(e.active_class),s=!1,c.hideLoadingIcon(e),i&&a.isFunction(i)&&i.call(t)}})):(a(t).slideDown("fast").addClass(e.active_class),s=!1,c.hideLoadingIcon(e),i&&a.isFunction(i)&&i.call(t))},getSuccess:function(t){return e.success?a.isFunction(e.success)?e.success:e.success[t]:null},showLoadingIcon:function(t){t.loading_icon&&a(t.loading_icon).show()},hideLoadingIcon:function(t){t.loading_icon&&a(t.loading_icon).hide()}};return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(a.error("Method "+t+" does not exist in jQuery.autotab"),void 0):n.init.apply(this,arguments)},a.fn.autotabs.defaults={tab_pane_selector:"div, section, .tab-pane",tab_label_selector:"h1, h2, h3, h4",tabs_class:"autotabs",tab_class:"autotab",tabs_selector:"",active_class:"current",active_tab:null,cookie_name:"active_tab",cookie_path:"/",force_refresh:!1,tab_orphans:!1,loading_icon:"#loading",tab_id:function(a){return"__"+a},tab_label:function(a){return"Tab "+(a+1)},tab_pane_id:function(a){return"___"+(a+1)},vertical:!1}})(jQuery);