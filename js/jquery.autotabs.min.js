(function(a){a.fn.autotabs=function(g){var d,b,f=false;var c={init:function(h){d=a.extend(true,{},this.autotabs.defaults,h);return this.each(function(){var l=a(this);var k='<ul class="'+d.tabs_class+(d.vertical?" vertical":"")+'">';var j=l.children(d.tab_pane_selector);b=(d.active_tab==null?(a.cookie?a.cookie(d.cookie_name):0):d.active_tab)||0;b=Math.min(j.length-1,b);switch(j.length){case 0:return;case 1:if(!d.tab_orphans){j.show();return}default:j.each(function(m,n){if(n.id==""){var o=d.tab_pane_id&&a.isFunction(d.tab_pane_id)?d.tab_pane_id(m,n):"___"+(m+1);a(n).attr("id",o)}k+=e.generate_tab(m,n)})}k+="</ul>";var i=(d.tabs_selector!="")?a(d.tabs_selector):l;if(!i){i=l}a("."+d.tabs_class,i).remove();i.prepend(k);a("ul."+d.tabs_class+" li > a",i).click(function(){if(f){return false}var m=a(this);if(a(this).parent().hasClass(d.active_class)&&!d.force_refresh){return false}f=true;e.showLoadingIcon(d);m.parent().addClass(d.active_class).siblings("li").removeClass(d.active_class);l.children(d.tab_pane_selector).each(function(){a(this).slideUp("fast").removeClass(d.active_class)});l.children(d.tab_pane_selector).each(function(n,o){if(m.attr("rel")==a(this).attr("id")){try{e.load(this);if(a.cookie){a.cookie(d.cookie_name,n,{path:d.cookie_path})}}catch(o){console.log(o)}}});return false});e.showLoadingIcon(d);l.children(d.tab_pane_selector).each(function(n,m){if(n==b){e.load(m)}else{a(m).slideUp("fast").removeClass(d.active_class)}})})}};var e={generate_tab:function(j,k){var m=d.tab_id&&a.isFunction(d.tab_id)?d.tab_id(k.id):k.id;var h=d.tab_class;if(a(k).data("tab-class")){h+=" "+(a(k).data("tab-class"))}h+=j==b?" "+d.active_class:"";var i=a(k).attr("title")||(a(d.tab_label_selector,a(k)).length?a(d.tab_label_selector,a(k)).get(0).innerHTML:d.tab_label&&a.isFunction(d.tab_label)?d.tab_label(j,k):"Tab "+(j+1));var l='<a href="'+(a(k).attr("rel")||"#"+k.id)+'" rel="'+k.id+'"><span>'+i+"</span></a>";return'<li class="'+h+'" id="'+m+'">'+l+"</li>"},load:function(i){var h=e.getSuccess(i.id);if((url=a(i).attr("rel"))&&(a.trim(a(i).html())==""||d.force_refresh)){a(i).empty();a.ajax({url:url,error:function(){location.reload(true)},success:function(j){a(i).html(j);a(i).slideDown("fast").addClass(d.active_class);f=false;e.hideLoadingIcon(d);if(h&&a.isFunction(h)){h.call(i)}}})}else{a(i).slideDown("fast").addClass(d.active_class);f=false;e.hideLoadingIcon(d);if(h&&a.isFunction(h)){h.call(i)}}},getSuccess:function(h){if(!d.success){return null}if(a.isFunction(d.success)){return d.success}return d.success[h]},showLoadingIcon:function(h){if(!h.loading_icon){return}a(h.loading_icon).show()},hideLoadingIcon:function(h){if(!h.loading_icon){return}a(h.loading_icon).hide()}};if(c[g]){return c[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return c.init.apply(this,arguments)}else{a.error("Method "+g+" does not exist in jQuery.autotabs")}}};a.fn.autotabs.defaults={tab_pane_selector:"div, section, .tab-pane",tab_label_selector:"h1, h2, h3, h4",tabs_class:"autotabs",tab_class:"autotab",tabs_selector:"",active_class:"current",active_tab:null,cookie_name:"active_tab",cookie_path:"/",force_refresh:false,tab_orphans:false,loading_icon:"#loading",tab_id:function(b){return"__"+b},tab_label:function(b,c){return"Tab "+(b+1)},tab_pane_id:function(b,c){return"___"+(b+1)},vertical:false}})(jQuery);